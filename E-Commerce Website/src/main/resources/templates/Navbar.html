<nav class="navbar navbar-expand-md bg-dark navbar-dark">
    <a class="navbar-brand" href="/">Computers & Electronice Devices</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="collapsibleNavbar">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item">
                <a class="nav-link" href="/">Home <span class="fa fa-home"></span></a>
            </li>
            <li>
                <a class="nav-link" href="/products">Products <span class="fab fa-product-hunt"></span></a>
            </li>
            <li>
                <a class="nav-link" href="/search">Search <span class="fas fa-search"></span></a>
            </li>
            <li th:if="${loggedIn}">
                <a class="nav-link" href="/purchase">Purchase <span class="fas fa-money-bill-alt"></span></a>
            </li>
        </ul>
        <ul class="navbar-nav">
            <li th:if="${loggedIn}">
                <a th:text="${username}" class="nav-link" href="/user"></a>
            </li>
            <li th:if="${loggedIn}">
                <a class="nav-link" href="javascript:void(0);" data-toggle="modal" data-target="#logout-modal">Logout <span class="fa fa-sign-out-alt"></span></a>
            </li>
            <li th:if="${!loggedIn}">
                <a class="nav-link" href="/login">Login <span class="fa fa-sign-out-alt"></span></a>
            </li>
        </ul>
    </div>  
</nav>

<div th:if="${loggedIn}" class="modal fade" id="logout-modal">
    <div class="modal-dialog">
        <div class="modal-content">
      
            <!-- Modal Header -->
            <div class="modal-header" style="background-color: #272822 !important; color:#fff;">
            <h4 class="modal-title">Logout dialog</h4>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
        
            <!-- Modal body -->
            <div class="modal-body">
                <p>You're about to logout of the current session</p>
                <b style="color:red;">Notice that any items you've saved in your cart (but haven't purchased it yet) will be lost.</b>
                <b>Are you sure you want to logout ?</b>
                <button id="logout-yes-button" class="btn btn-block btn-success">Yes <span class="fa fa-check"></span></button>
                <button id="logout-no-button" class="btn btn-block btn-danger">No <span class="fa fa-times"></span></button>
            </div>
        
        <!-- Modal footer -->
            <div class="modal-footer" style="background-color: #272822 !important;">
                <button type="button" class="btn btn-dark" data-dismiss="modal">Close</button>
            </div>
            
        </div>
    </div>
</div>

<script th:if="${loggedIn}">
    /*
    function updateTable() {
        $.ajax({
            url : "/cart/retrieve",
            method : "POST",
            beforeSend : function(xhr, settings) {
                $("#cart-items").html("");
            },
            success : function(data, status, xhr) {
                if (data === null || data.length === 0) {
                    $("#purchase-button").hide();
                    $("#cart-items").html("<p style='color:red;'>You don't have any items in your cart yet.</p>");
                }
                else {
                    var table = "";
                    table += "<div class='table-responsive'>";
                        table += "<table class='table'>";
                            table += "<tr>";
                                table += "<th>Product name</th>";
                                table += "<th>Price</th>";
                                table += "<th>Quantity</th>";
                                table += "<th></th>";
                            table += "</tr>";
                        for (var i in data) {
                            table += "<tr>";
                                table += ("<td>" + data[i].product.name + "</td>");
                                table += ("<td>" + data[i].product.price + "$</td>");
                                table += ("<td>" + data[i].quantity + "</td>");
                                table += ("<td><button class='btn btn-danger product-cart-remove' data-product-id='" + data[i].product.id + "'>Remove</button></td>");
                            table += "</tr>";
                        }
                        table += "</table>";
                    table += "</div>";
                    $("#cart-items").html(table);
                    $("#purchase-button").show();
                }
            }
        });
    }
    */

    $(function() {
        $("#logout-yes-button").on("click", function() {
            $("#logout-modal").modal("hide");
            window.location.href = "/logout";
        });

        $("#logout-no-button").on("click", function() {
            $("#logout-modal").modal("hide");
        });
    
        
        
        
    });
</script>